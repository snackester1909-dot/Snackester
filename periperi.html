<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peri Peri Makhana - Snackester Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .premium-gradient {
            background: linear-gradient(135deg, #000000 0%, #434343 50%, #000000 100%);
        }
        
        .premium-text {
            background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 50%, #e0e0e0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .premium-card {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(255, 255, 255, 0.05);
        }
        
        .premium-button {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .premium-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }
        
        .premium-input {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border: 2px solid transparent;
            background-clip: padding-box;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }
        
        .premium-input:focus {
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.8);
        }
        
        .slide-container {
            position: relative;
            overflow: hidden;
        }
        
        .slide-track {
            display: flex;
            transition: transform 0.5s ease;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .star-rating {
            color: #fbbf24;
        }
        
        .hover-scale {
            transition: transform 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.05);
        }
        
        .coupon-code {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .price-update {
            animation: priceGlow 0.5s ease-in-out;
        }
        
        @keyframes priceGlow {
            0% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
            50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
            100% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
        }
        
        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .otp-countdown {
            color: #ef4444;
            font-weight: bold;
        }
        
        .purchase-buttons {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="min-h-full bg-gradient-to-br from-gray-50 to-gray-100">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <img src="Snackester Logo.jpg" alt="Snackester Logo" class="w-10 h-10 rounded-full object-cover" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center" style="display: none;">
                        <span class="text-white font-bold text-lg">S</span>
                    </div>
                    <span class="text-2xl font-bold gradient-text">Snackester</span>
                </div>
                
                <!-- Search Bar -->
                <div class="flex-1 max-w-lg mx-8">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search for snacks, makhana, healthy foods..." 
                               class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"
                               onkeyup="handleSearch(event)">
                        <span class="absolute left-3 top-2.5 text-gray-400">üîç</span>
                        <div id="searchResults" class="absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 hidden max-h-60 overflow-y-auto z-50"></div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4" id="navButtons">
                    <div class="relative">
                        <button onclick="openModal('loginModal')" class="bg-gradient-to-r from-gray-800 to-black text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all">Login</button>
                    </div>
                    <button onclick="openModal('signupModal')" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all">Sign Up</button>
                    <button onclick="toggleCart()" class="relative bg-gradient-to-r from-green-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all">
                        Cart (<span id="cartCount">0</span>)
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <!-- Product Images & Purchase Buttons -->
            <div class="space-y-6">
                <!-- Image Slider -->
                <div class="slide-container bg-white rounded-2xl shadow-xl p-6 relative">
                    <!-- Wishlist Button -->
                    <button onclick="toggleWishlist()" id="wishlistBtn" class="absolute top-4 right-4 z-10 w-12 h-12 bg-white rounded-full shadow-lg flex items-center justify-center hover:shadow-xl hover:scale-110 transition-all duration-300 group">
                        <span id="wishlistIcon" class="text-2xl transition-all duration-300 group-hover:scale-125">ü§ç</span>
                    </button>
                    
                    <div class="slide-track" id="slideTrack">
                        <div class="min-w-full">
                            <div class="w-full h-96 bg-gradient-to-br from-red-100 to-orange-100 rounded-xl flex items-center justify-center p-4">
                                <img src="Peri Peri(70&70).png" alt="Tangy Tomato Makhana" class="max-w-full max-h-full object-contain" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <span class="text-8xl hidden">üçÖ</span>
                            </div>
                        </div>
                        <div class="min-w-full">
                            <div class="w-full h-96 bg-gradient-to-br from-orange-100 to-yellow-100 rounded-xl flex items-center justify-center">
                                <span class="text-8xl">ü•ú</span>
                            </div>
                        </div>
                        <div class="min-w-full">
                            <div class="w-full h-96 bg-gradient-to-br from-green-100 to-blue-100 rounded-xl flex items-center justify-center">
                                <span class="text-8xl">üì¶</span>
                            </div>
                        </div>
                    </div>
                    <div class="flex justify-center space-x-2 mt-4">
                        <button onclick="changeSlide(0)" class="w-3 h-3 rounded-full bg-gray-300 slide-dot active"></button>
                        <button onclick="changeSlide(1)" class="w-3 h-3 rounded-full bg-gray-300 slide-dot"></button>
                        <button onclick="changeSlide(2)" class="w-3 h-3 rounded-full bg-gray-300 slide-dot"></button>
                    </div>
                </div>
                
                <!-- Purchase Buttons Section -->
                <div class="purchase-buttons rounded-2xl p-6 border border-gray-200">
                    <div class="mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center space-x-3">
                                <span id="displayPrice" class="text-3xl font-bold text-green-600">‚Çπ249</span>
                                <span class="text-lg text-gray-600">for 80g</span>
                            </div>
                            <div id="savingsDisplay" class="hidden">
                                <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">Save ‚Çπ<span id="savingsAmount">0</span></span>
                            </div>
                        </div>
                        <div id="originalPriceDisplay" class="hidden">
                            <span class="text-lg line-through text-gray-500">‚Çπ<span id="originalPrice">249</span></span>
                        </div>
                    </div>
                    
                    <!-- Quantity Selector -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Quantity</label>
                        <div class="flex items-center space-x-3">
                            <button onclick="updateQuantity(-1)" class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded-lg font-semibold transition-all">-</button>
                            <span id="quantity" class="text-xl font-semibold px-4">1</span>
                            <button onclick="updateQuantity(1)" class="bg-gray-200 hover:bg-gray-300 px-3 py-2 rounded-lg font-semibold transition-all">+</button>
                            <span class="text-sm text-gray-600 ml-4">89 in stock</span>
                        </div>
                    </div>
                    
                    <!-- Purchase Buttons -->
                    <div class="space-y-3">
                        <button onclick="addToCart()" class="group w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-4 rounded-xl font-semibold text-lg hover:from-purple-700 hover:to-blue-700 hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center">
                            <span class="mr-2 text-xl group-hover:scale-110 transition-transform duration-300">üõí</span>
                            <span class="group-hover:tracking-wide transition-all duration-300">Add to Cart - ‚Çπ<span id="cartButtonPrice">249</span></span>
                        </button>
                        <div class="grid grid-cols-2 gap-3">
                            <button onclick="buyNow()" class="group bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 rounded-xl font-semibold hover:from-green-700 hover:to-blue-700 hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center">
                                <span class="mr-1 text-lg group-hover:scale-110 transition-transform duration-300">üí≥</span>
                                <span class="group-hover:tracking-wide transition-all duration-300">Buy Now</span>
                            </button>
                            <button onclick="oneClickBuy()" class="group bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-xl font-semibold hover:from-orange-700 hover:to-red-700 hover:shadow-xl transition-all duration-300 transform hover:scale-105 flex items-center justify-center">
                                <span class="mr-1 text-lg group-hover:scale-110 transition-transform duration-300">‚ö°</span>
                                <span class="group-hover:tracking-wide transition-all duration-300">1-Click Buy</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Trust Badges -->
                    <div class="mt-6 grid grid-cols-3 gap-4 text-center">
                        <div class="flex flex-col items-center">
                            <span class="text-2xl mb-1">üöö</span>
                            <span class="text-xs text-gray-600">Free Delivery</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-2xl mb-1">üîí</span>
                            <span class="text-xs text-gray-600">Secure Payment</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <span class="text-2xl mb-1">‚Ü©Ô∏è</span>
                            <span class="text-xs text-gray-600">Easy Returns</span>
                        </div>
                    </div>
                </div>
                
                <!-- Share Buttons -->
                <div class="bg-white rounded-2xl shadow-xl p-6">
                    <h3 class="text-lg font-semibold mb-4 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">Share this product</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="shareProduct('instagram')" class="group bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl hover:border-pink-300 hover:text-pink-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5 group-hover:scale-110 transition-transform" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                            <span class="font-medium">Instagram</span>
                        </button>
                        <button onclick="shareProduct('twitter')" class="group bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl hover:border-blue-300 hover:text-blue-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5 group-hover:scale-110 transition-transform" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                            <span class="font-medium">Twitter</span>
                        </button>
                        <button onclick="shareProduct('whatsapp')" class="group bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl hover:border-green-300 hover:text-green-600 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5 group-hover:scale-110 transition-transform" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                            </svg>
                            <span class="font-medium">WhatsApp</span>
                        </button>
                        <button onclick="copyLink()" class="group bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl hover:border-gray-400 hover:text-gray-900 transition-all duration-300 transform hover:scale-105 hover:shadow-lg flex items-center justify-center space-x-2">
                            <svg class="w-5 h-5 group-hover:scale-110 transition-transform" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                            </svg>
                            <span class="font-medium">Copy Link</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Product Details -->
            <div class="space-y-6">
                <div class="bg-white rounded-2xl shadow-xl p-8">
                    <h1 class="text-4xl font-bold text-gray-900 mb-4">Peri Peri Makhana</h1>
                    <div class="flex items-center space-x-4 mb-6">
                        <div class="flex items-center">
                            <span class="star-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            <span class="ml-2 text-gray-600">(4.7/5)</span>
                        </div>
                        <span class="text-gray-400">|</span>
                        <span class="text-gray-600">118 reviews</span>
                    </div>
                    
                    <!-- Stock Info -->
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4 mb-6">
                        <div class="flex justify-between items-center">
                            <span class="text-green-700 font-semibold">‚úÖ In Stock</span>
                            <span class="text-gray-600">97 units remaining</span>
                        </div>
                        <div class="text-sm text-gray-600 mt-1">23 sold in last week</div>
                    </div>

                    <!-- Available Offers -->
                    <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-6 mb-6 border border-green-200">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Available offers</h3>
                        
                        <div class="space-y-3">
                            <!-- Special Price Offer -->
                            <div class="flex items-start space-x-3 p-3 bg-white rounded-lg border border-green-200 hover:shadow-md transition-all cursor-pointer" onclick="showOfferDetails('special')">
                                <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="text-green-600 text-sm font-bold">%</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-gray-800">Special Price</div>
                                    <div class="text-sm text-gray-600">Get extra 57% off</div>
                                    <div class="text-xs text-blue-600 hover:underline">T&C</div>
                                </div>
                            </div>
                            
                            <!-- Combo Offer -->
                            <div class="flex items-start space-x-3 p-3 bg-white rounded-lg border border-blue-200 hover:shadow-md transition-all cursor-pointer" onclick="showOfferDetails('combo')">
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="text-blue-600 text-sm">üì¶</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-gray-800">Combo Offer</div>
                                    <div class="text-sm text-gray-600">Buy 3 or more items save 5%</div>
                                    <div class="flex items-center space-x-2 text-xs">
                                        <span class="text-blue-600 hover:underline cursor-pointer">See all products</span>
                                        <span class="text-blue-600 hover:underline cursor-pointer">T&C</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Buy More Save More -->
                            <div class="flex items-start space-x-3 p-3 bg-white rounded-lg border border-purple-200 hover:shadow-md transition-all cursor-pointer" onclick="showOfferDetails('buymore')">
                                <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="text-purple-600 text-sm">üí∞</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-gray-800">Buy More, Save More</div>
                                    <div class="text-sm text-gray-600">Buy worth ‚Çπ200 save 5%</div>
                                    <div class="flex items-center space-x-2 text-xs">
                                        <span class="text-blue-600 hover:underline cursor-pointer">See all products</span>
                                        <span class="text-blue-600 hover:underline cursor-pointer">T&C</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Bank Offer -->
                            <div class="flex items-start space-x-3 p-3 bg-white rounded-lg border border-orange-200 hover:shadow-md transition-all cursor-pointer" onclick="showOfferDetails('bank')">
                                <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0">
                                    <span class="text-orange-600 text-sm">üè¶</span>
                                </div>
                                <div class="flex-1">
                                    <div class="font-semibold text-gray-800">Bank Offer</div>
                                    <div class="text-sm text-gray-600">5% cashback on Axis Bank Flipkart Debit Card up to ‚Çπ750</div>
                                    <div class="text-xs text-blue-600 hover:underline">T&C</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- View More Offers -->
                        <button onclick="showAllOffers()" class="w-full mt-4 text-blue-600 hover:text-blue-800 font-medium text-sm py-2 border border-blue-200 rounded-lg hover:bg-blue-50 transition-all">
                            View 6 more offers
                        </button>
                    </div>

                    <!-- Pricing with Discounts -->
                    <div class="bg-gradient-to-r from-red-50 to-orange-50 rounded-2xl p-6 mb-6 border border-red-100">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl line-through text-gray-500">‚Çπ349</span>
                                    <span class="text-4xl font-bold text-green-600">‚Çπ249</span>
                                    <span class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">29% OFF</span>
                                </div>
                                <p class="text-sm text-gray-600 mt-1">You save ‚Çπ100 on this purchase!</p>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-600">Price per 100g</div>
                                <div class="text-lg font-semibold text-gray-800">‚Çπ311.25</div>
                            </div>
                        </div>
                        
                        <!-- Apply Coupon Section -->
                        <div class="border-t border-red-200 pt-4">
                            <div class="flex items-center space-x-3">
                                <input type="text" id="couponInput" placeholder="Enter coupon code" 
                                       class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                                <button onclick="applyCoupon()" class="bg-gradient-to-r from-red-500 to-pink-500 text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                                    Apply
                                </button>
                            </div>
                            <div id="couponResult" class="mt-2 text-sm"></div>
                            <div class="mt-3 flex flex-wrap gap-2">
                                <button onclick="applyCouponCode('SNACKY10')" class="bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800 px-4 py-2 rounded-full text-xs font-medium hover:from-yellow-200 hover:to-orange-200 hover:shadow-lg hover:scale-105 transition-all duration-300 border border-yellow-300">
                                    ‚ú® SNACKY10 - 10% OFF
                                </button>
                            </div>
                        </div>
                        
                        <!-- Final Price Display -->
                        <div id="finalPriceSection" class="hidden border-t border-red-200 pt-4 mt-4">
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-semibold">Final Price:</span>
                                <div class="text-right">
                                    <div id="finalPrice" class="text-2xl font-bold text-green-600"></div>
                                    <div id="totalSavings" class="text-sm text-green-600"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Size Selection -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-3">Choose Size</h3>
                        <div class="grid grid-cols-3 gap-3">
                            <button onclick="selectSize(80, 249)" class="size-option active bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-300 rounded-xl p-4 text-center hover:shadow-lg transition-all">
                                <div class="font-semibold text-gray-800">80g</div>
                                <div class="text-sm text-gray-600">‚Çπ249</div>
                                <div class="text-xs text-green-600 font-medium">In Stock</div>
                            </button>
                            <button class="size-option bg-gradient-to-br from-gray-100 to-gray-200 border-2 border-gray-300 rounded-xl p-4 text-center opacity-60 cursor-not-allowed">
                                <div class="font-semibold text-gray-500">75g</div>
                                <div class="text-sm text-gray-500">‚Çπ229</div>
                                <div class="text-xs text-red-500 font-medium">Out of Stock</div>
                            </button>
                            <button class="size-option bg-gradient-to-br from-gray-100 to-gray-200 border-2 border-gray-300 rounded-xl p-4 text-center opacity-60 cursor-not-allowed">
                                <div class="font-semibold text-gray-500">100g</div>
                                <div class="text-sm text-gray-500">‚Çπ299</div>
                                <div class="text-xs text-red-500 font-medium">Out of Stock</div>
                            </button>
                        </div>
                    </div>

                    <!-- Delivery Section -->
                    <div class="bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl p-6 mb-6 border border-blue-200">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Delivery</h3>
                        
                        <div class="flex items-center space-x-3 mb-4">
                            <input type="text" id="pincodeInput" placeholder="148106" value="148106" 
                                   class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                   onkeyup="handlePincodeChange(event)">
                            <button onclick="changePincode()" class="bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-all">
                                Change
                            </button>
                            <button onclick="checkPincode()" class="text-blue-600 hover:text-blue-800 font-medium">
                                Check pincode
                            </button>
                            <button onclick="clearPincode()" class="text-gray-500 hover:text-gray-700">‚úï</button>
                        </div>
                        
                        <div id="pincodeResult" class="mb-4">
                            <div class="text-sm text-gray-600">üìç Longowal, Punjab - 148106</div>
                        </div>
                        
                        <div class="bg-white rounded-lg p-4 border border-blue-200">
                            <div class="flex items-center justify-between mb-2">
                                <div class="font-semibold text-gray-800">Delivery by</div>
                                <div class="text-green-600 font-bold">15 Oct, Sunday</div>
                            </div>
                            <div class="text-sm text-gray-600 mb-3">if ordered before 2:25 AM</div>
                            <button onclick="showDeliveryDetails()" class="text-blue-600 hover:text-blue-800 font-medium text-sm">
                                View Details
                            </button>
                        </div>
                    </div>

                    <!-- Highlights -->
                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-2xl p-6 mb-6 border border-yellow-200">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Highlights</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                            <li class="flex items-center space-x-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Premium quality fox nuts from Bihar</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Rich in protein and fiber</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-500">‚úì</span>
                                <span>No artificial colors or preservatives</span>
                            </li>
                            <li class="flex items-center space-x-2">
                                <span class="text-green-500">‚úì</span>
                                <span>Perfect healthy snacking option</span>
                            </li>
                        </ul>
                    </div>

                    <!-- Services -->
                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-2xl p-6 mb-6 border border-purple-200">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">Services</h3>
                        
                        <div class="space-y-3 text-sm">
                            <div class="flex items-center justify-between">
                                <span class="text-gray-700">Cash on Delivery available</span>
                                <span class="text-green-600 font-medium">‚úì</span>
                            </div>
                            
                            <div class="border-t border-purple-200 pt-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-gray-700">Seller: <span class="font-medium">Snackester Team</span></span>
                                    <span class="text-blue-600 text-xs">‚≠ê 4.7/5</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <span class="text-gray-700">No Returns Applicable</span>
                                <span class="text-orange-600 font-medium">?</span>
                            </div>
                            
                            <button onclick="showOtherSellers()" class="text-blue-600 hover:text-blue-800 font-medium text-sm">
                                See other sellers
                            </button>
                        </div>
                    </div>

                    <!-- Product Details Tabs -->
                    <div class="mb-6">
                        <div class="flex space-x-1 mb-4 bg-gradient-to-r from-blue-50 to-purple-50 p-1 rounded-xl">
                            <button onclick="switchTab('description')" class="tab-button active flex-1 py-3 px-4 rounded-lg font-medium transition-all bg-white shadow-md text-blue-600">
                                üìù Description
                            </button>
                            <button onclick="switchTab('nutrition')" class="tab-button flex-1 py-3 px-4 rounded-lg font-medium transition-all text-gray-600 hover:bg-white hover:shadow-md">
                                ü•ó Nutrition
                            </button>
                            <button onclick="switchTab('reviews')" class="tab-button flex-1 py-3 px-4 rounded-lg font-medium transition-all text-gray-600 hover:bg-white hover:shadow-md">
                                ‚≠ê Reviews
                            </button>
                            <button onclick="switchTab('ingredients')" class="tab-button flex-1 py-3 px-4 rounded-lg font-medium transition-all text-gray-600 hover:bg-white hover:shadow-md">
                                üåø Ingredients
                            </button>
                        </div>
                        
                        <!-- Tab Content -->
                        <div class="tab-content bg-gradient-to-br from-white to-blue-50 rounded-xl p-6 border border-blue-100 shadow-sm">
                            <!-- Description Tab -->
                            <div id="descriptionTab" class="tab-panel">
                                <h3 class="text-2xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Premium Tangy Tomato Makhana</h3>
                                
                                <!-- Key Highlights -->
                                <div class="bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 rounded-xl p-6 mb-6 border border-blue-200 backdrop-blur-sm">
                                    <h4 class="text-lg font-semibold text-gray-800 mb-3">‚ú® Why Choose Our Makhana?</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="flex items-center space-x-2 hover:scale-105 transition-transform">
                                            <span class="text-green-500 text-xl">üå±</span>
                                            <span class="text-sm font-medium">100% Natural</span>
                                        </div>
                                        <div class="flex items-center space-x-2 hover:scale-105 transition-transform">
                                            <span class="text-blue-500 text-xl">üí™</span>
                                            <span class="text-sm font-medium">High Protein</span>
                                        </div>
                                        <div class="flex items-center space-x-2 hover:scale-105 transition-transform">
                                            <span class="text-red-500 text-xl">üî•</span>
                                            <span class="text-sm font-medium">Low Calories</span>
                                        </div>
                                        <div class="flex items-center space-x-2 hover:scale-105 transition-transform">
                                            <span class="text-yellow-500 text-xl">‚ö°</span>
                                            <span class="text-sm font-medium">Energy Boost</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="prose prose-gray max-w-none">
                                    <p class="text-gray-700 leading-relaxed mb-4">
                                        Indulge in the <strong>authentic taste of Peri Peri Masala</strong> with our premium roasted makhana. 
                                        Each fox nut is carefully hand-picked from the pristine waters of Bihar and roasted to perfection 
                                        using traditional methods that preserve their natural crunch and nutritional value.
                                    </p>
                                    
                                    <p class="text-gray-700 leading-relaxed mb-4">
                                        Our <em>signature Peri Peri seasoning</em> combines sun-dried tomatoes, aromatic herbs, and 
                                        a secret blend of spices that creates an explosion of flavors in every bite. Perfect for 
                                        health-conscious snackers who refuse to compromise on taste.
                                    </p>
                                    
                                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-4 border border-yellow-200">
                                        <h5 class="font-semibold text-gray-800 mb-2">üèÜ Premium Quality Promise</h5>
                                        <ul class="text-sm text-gray-700 space-y-1">
                                            <li>‚Ä¢ Hand-picked from Bihar's pristine lotus ponds</li>
                                            <li>‚Ä¢ Traditional roasting methods for perfect crunch</li>
                                            <li>‚Ä¢ No artificial preservatives or colors</li>
                                            <li>‚Ä¢ Vacuum-sealed for maximum freshness</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <!-- Nutrition Tab -->
                            <div id="nutritionTab" class="tab-panel hidden">
                                <h3 class="text-xl font-bold mb-4 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent">Nutritional Information</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                                    <div class="text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200 hover:shadow-lg transition-all">
                                        <div class="text-3xl font-bold text-green-600">320</div>
                                        <div class="text-sm text-gray-600">Calories</div>
                                    </div>
                                    <div class="text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 hover:shadow-lg transition-all">
                                        <div class="text-3xl font-bold text-blue-600">9.7g</div>
                                        <div class="text-sm text-gray-600">Protein</div>
                                    </div>
                                    <div class="text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl border border-purple-200 hover:shadow-lg transition-all">
                                        <div class="text-3xl font-bold text-purple-600">14.5g</div>
                                        <div class="text-sm text-gray-600">Fiber</div>
                                    </div>
                                    <div class="text-center p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl border border-orange-200 hover:shadow-lg transition-all">
                                        <div class="text-3xl font-bold text-orange-600">0.1g</div>
                                        <div class="text-sm text-gray-600">Fat</div>
                                    </div>
                                </div>
                                
                                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200">
                                    <h4 class="font-semibold text-gray-800 mb-3">Complete Nutritional Breakdown (Per 80g)</h4>
                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                        <div class="space-y-2">
                                            <div class="flex justify-between"><span>Total Carbs:</span><span class="font-medium">76.9g</span></div>
                                            <div class="flex justify-between"><span>Dietary Fiber:</span><span class="font-medium">14.5g</span></div>
                                            <div class="flex justify-between"><span>Sugars:</span><span class="font-medium">0g</span></div>
                                            <div class="flex justify-between"><span>Sodium:</span><span class="font-medium">1mg</span></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between"><span>Calcium:</span><span class="font-medium">60mg</span></div>
                                            <div class="flex justify-between"><span>Iron:</span><span class="font-medium">1.4mg</span></div>
                                            <div class="flex justify-between"><span>Magnesium:</span><span class="font-medium">210mg</span></div>
                                            <div class="flex justify-between"><span>Phosphorus:</span><span class="font-medium">540mg</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Reviews Tab -->
                            <div id="reviewsTab" class="tab-panel hidden">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent">Customer Reviews</h3>
                                    <button onclick="openModal('reviewModal')" class="bg-gradient-to-r from-purple-500 to-blue-500 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all text-sm">
                                        Write Review
                                    </button>
                                </div>
                                <div id="tabReviewsList" class="space-y-4 max-h-96 overflow-y-auto">
                                    <!-- Reviews will be populated here -->
                                </div>
                            </div>

                            <!-- Ingredients Tab -->
                            <div id="ingredientsTab" class="tab-panel hidden">
                                <h3 class="text-xl font-bold mb-4 bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent">Ingredients & Allergen Information</h3>
                                
                                <div class="space-y-6">
                                    <div class="bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 border border-green-200">
                                        <h4 class="font-semibold text-gray-800 mb-3">üåø Primary Ingredients</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div class="space-y-2">
                                                <div class="flex items-center space-x-2">
                                                    <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                                                    <span class="text-sm">Fox Nuts (Makhana) - 85%</span>
                                                </div>
                                                <div class="flex items-center space-x-2">
                                                    <span class="w-2 h-2 bg-red-500 rounded-full"></span>
                                                    <span class="text-sm">Peri Peri Powder - 8%</span>
                                                </div>
                                                <div class="flex items-center space-x-2">
                                                    <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                                                    <span class="text-sm">Spice Mix - 5%</span>
                                                </div>
                                            </div>
                                            <div class="space-y-2">
                                                <div class="flex items-center space-x-2">
                                                    <span class="w-2 h-2 bg-orange-500 rounded-full"></span>
                                                    <span class="text-sm">Rock Salt - 1.5%</span>
                                                </div>
                                                <div class="flex items-center space-x-2">
                                                    <span class="w-2 h-2 bg-purple-500 rounded-full"></span>
                                                    <span class="text-sm">Natural Herbs - 0.5%</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-6 border border-yellow-200">
                                        <h4 class="font-semibold text-gray-800 mb-3">‚ö†Ô∏è Allergen Information</h4>
                                        <div class="grid grid-cols-2 gap-4 text-sm">
                                            <div>
                                                <p class="text-green-600 font-medium mb-1">‚úÖ Free From:</p>
                                                <ul class="space-y-1 text-gray-700">
                                                    <li>‚Ä¢ Gluten</li>
                                                    <li>‚Ä¢ Nuts</li>
                                                    <li>‚Ä¢ Dairy</li>
                                                    <li>‚Ä¢ Soy</li>
                                                </ul>
                                            </div>
                                            <div>
                                                <p class="text-blue-600 font-medium mb-1">üè≠ Manufactured in:</p>
                                                <p class="text-gray-700 text-sm">Facility that processes wheat and sesame</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- You Might Also Like Section -->
        <div class="mt-12 bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-xl p-8 border border-blue-100">
            <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">You Might Also Like</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Tangy Tomato Makhana -->
                <div class="bg-gradient-to-br from-white to-orange-50 rounded-xl p-6 border border-orange-200 hover:shadow-xl hover:scale-105 transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <div class="w-20 h-20 bg-gradient-to-br from-red-100 to-orange-100 rounded-xl flex items-center justify-center text-4xl group-hover:scale-110 transition-transform">
                            üå∂Ô∏è
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg text-gray-800 group-hover:text-orange-600 transition-colors">Tangy Tomato Makhana</h3>
                            <p class="text-sm text-gray-600 mb-2">Spicy & Tangy Flavor</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-lg font-bold text-orange-600">‚Çπ259</span>
                                    <span class="text-sm text-gray-500 line-through">‚Çπ299</span>
                                </div>
                                <span class="text-xs bg-orange-100 text-orange-800 px-2 py-1 rounded-full font-medium">13% OFF</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="window.open('Tangytomato.html', '_blank', 'noopener,noreferrer')" class="w-full mt-4 bg-gradient-to-r from-orange-500 to-red-500 text-white py-2 rounded-lg font-medium hover:shadow-lg transition-all">
                        View Product
                    </button>
                </div>

                <!-- Chat Masala Makhana -->
                <div class="bg-gradient-to-br from-white to-green-50 rounded-xl p-6 border border-green-200 hover:shadow-xl hover:scale-105 transition-all duration-300 group">
                    <div class="flex items-center space-x-4">
                        <div class="w-20 h-20 bg-gradient-to-br from-green-100 to-lime-100 rounded-xl flex items-center justify-center text-4xl group-hover:scale-110 transition-transform">
                            ü•ó
                        </div>
                        <div class="flex-1">
                            <h3 class="font-bold text-lg text-gray-800 group-hover:text-green-600 transition-colors">Chat Masala Makhana</h3>
                            <p class="text-sm text-gray-600 mb-2">Tangy Street Food Taste</p>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="text-lg font-bold text-green-600">‚Çπ239</span>
                                    <span class="text-sm text-gray-500 line-through">‚Çπ279</span>
                                </div>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full font-medium">14% OFF</span>
                            </div>
                        </div>
                    </div>
                    <button onclick="window.open('chat masala.html', '_blank', 'noopener,noreferrer')" class="w-full mt-4 bg-gradient-to-r from-green-500 to-teal-500 text-white py-2 rounded-lg font-medium hover:shadow-lg transition-all">
                        View Product
                    </button>
                </div>
            </div>
        </div>

        <!-- Reviews Section -->
        <div class="mt-12 bg-white rounded-2xl shadow-xl p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Customer Reviews</h2>
                <button onclick="openModal('reviewModal')" class="bg-gradient-to-r from-purple-600 to-blue-600 text-white px-6 py-2 rounded-lg hover:shadow-lg transition-all">
                    Write Review
                </button>
            </div>
            
            <div id="reviewsList" class="space-y-6">
                <!-- Reviews will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="bg-gradient-to-br from-white to-gray-50 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-200">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">üîê</span>
                </div>
                <h2 class="text-3xl font-bold gradient-text">Welcome Back</h2>
                <p class="text-gray-600 mt-2">Sign in to your Snackester account</p>
            </div>
            <form onsubmit="handleLogin(event)">
                <div class="space-y-5">
                    <div class="relative">
                        <input type="email" id="loginEmail" placeholder="Email Address" required 
                               class="w-full p-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all bg-white">
                        <span class="absolute left-4 top-4 text-gray-400">üìß</span>
                    </div>
                    <div class="relative">
                        <input type="password" id="loginPassword" placeholder="Password" required 
                               class="w-full p-4 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all bg-white">
                        <span class="absolute left-4 top-4 text-gray-400">üîí</span>
                        <button type="button" onclick="togglePassword('loginPassword')" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600">üëÅÔ∏è</button>
                    </div>
                    <div class="flex items-center justify-between text-sm">
                        <label class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-purple-600 focus:ring-purple-500">
                            <span class="ml-2 text-gray-600">Remember me</span>
                        </label>
                        <button type="button" onclick="openModal('forgotPasswordModal')" class="text-purple-600 hover:text-purple-800 font-medium">Forgot Password?</button>
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 text-white py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all transform hover:scale-105">
                        Sign In Securely
                    </button>
                </div>
            </form>
            <div class="mt-6 text-center">
                <p class="text-gray-600">Don't have an account? 
                    <button onclick="closeModal('loginModal'); openModal('signupModal')" class="text-purple-600 hover:text-purple-800 font-semibold">Sign Up</button>
                </p>
            </div>
            <button onclick="closeModal('loginModal')" class="mt-4 w-full text-gray-500 hover:text-gray-700 py-2">Cancel</button>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal">
        <div class="bg-gradient-to-br from-white to-gray-50 rounded-3xl p-8 max-w-lg w-full mx-4 shadow-2xl border border-gray-200 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">‚ú®</span>
                </div>
                <h2 class="text-3xl font-bold gradient-text">Join Snackester</h2>
                <p class="text-gray-600 mt-2">Create your premium account</p>
            </div>
            
            <div id="signupStep1" class="signup-step">
                <form onsubmit="handleSignupStep1(event)">
                    <div class="space-y-5">
                        <div class="relative">
                            <input type="text" id="signupName" placeholder="Full Name" required 
                                   class="w-full p-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all bg-white">
                            <span class="absolute left-4 top-4 text-gray-400">üë§</span>
                        </div>
                        <div class="relative">
                            <input type="email" id="signupEmail" placeholder="Email Address" required 
                                   class="w-full p-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all bg-white">
                            <span class="absolute left-4 top-4 text-gray-400">üìß</span>
                        </div>
                        <div class="relative">
                            <input type="tel" id="signupPhone" placeholder="Phone Number (+91)" required pattern="[0-9]{10}" 
                                   class="w-full p-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all bg-white">
                            <span class="absolute left-4 top-4 text-gray-400">üì±</span>
                        </div>
                        <div class="relative">
                            <input type="password" id="signupPassword" placeholder="Create Password" required 
                                   class="w-full p-4 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all bg-white"
                                   onkeyup="validatePassword()">
                            <span class="absolute left-4 top-4 text-gray-400">üîí</span>
                            <button type="button" onclick="togglePassword('signupPassword')" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600">üëÅÔ∏è</button>
                        </div>
                        <div class="relative">
                            <input type="password" id="confirmPassword" placeholder="Confirm Password" required 
                                   class="w-full p-4 pl-12 pr-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all bg-white"
                                   onkeyup="validatePasswordMatch()">
                            <span class="absolute left-4 top-4 text-gray-400">üîí</span>
                            <button type="button" onclick="togglePassword('confirmPassword')" class="absolute right-4 top-4 text-gray-400 hover:text-gray-600">üëÅÔ∏è</button>
                        </div>
                        
                        <!-- Password Requirements -->
                        <div class="bg-gray-50 rounded-xl p-4">
                            <p class="text-sm font-medium text-gray-700 mb-2">Password Requirements:</p>
                            <div class="space-y-1 text-xs">
                                <div id="req-length" class="flex items-center text-gray-500">
                                    <span class="mr-2">‚ùå</span> At least 8 characters
                                </div>
                                <div id="req-capital" class="flex items-center text-gray-500">
                                    <span class="mr-2">‚ùå</span> One uppercase letter
                                </div>
                                <div id="req-number" class="flex items-center text-gray-500">
                                    <span class="mr-2">‚ùå</span> One number
                                </div>
                                <div id="req-special" class="flex items-center text-gray-500">
                                    <span class="mr-2">‚ùå</span> One special character (!@#$%^&*)
                                </div>
                                <div id="req-match" class="flex items-center text-gray-500">
                                    <span class="mr-2">‚ùå</span> Passwords match
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start">
                            <input type="checkbox" id="agreeTerms" required class="mt-1 rounded border-gray-300 text-green-600 focus:ring-green-500">
                            <label for="agreeTerms" class="ml-3 text-sm text-gray-600">
                                I agree to the <a href="terms-and-conditions.html" class="text-green-600 hover:text-green-800 font-medium">Terms of Service</a> 
                                and <a href="privacy-policy.html" class="text-green-600 hover:text-green-800 font-medium">Privacy Policy</a>
                            </label>
                        </div>
                        
                        <button type="submit" id="signupBtn" disabled 
                                class="w-full bg-gray-400 text-white py-4 rounded-xl font-semibold text-lg transition-all cursor-not-allowed">
                            Continue to Verification
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- OTP Verification Step -->
            <div id="signupStep2" class="signup-step hidden">
                <div class="text-center mb-6">
                    <div class="w-16 h-16 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-white text-2xl">üì±</span>
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Verify Your Account</h3>
                    <p class="text-gray-600 mt-2">We've sent verification codes to your email and phone</p>
                </div>
                
                <form onsubmit="handleOTPVerification(event)">
                    <div class="space-y-5">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label class="block text-sm font-medium text-gray-700">Email OTP</label>
                                <div id="emailOtpTimer" class="text-sm otp-countdown hidden">Resend in <span id="emailCountdown">60</span>s</div>
                            </div>
                            <div class="flex space-x-2">
                                <input type="text" maxlength="1" class="otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold" onkeyup="moveToNext(this, 0)" onpaste="handleOTPPaste(event, 'email')">
                                <input type="text" maxlength="1" class="otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold" onkeyup="moveToNext(this, 1)">
                                <input type="text" maxlength="1" class="otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold" onkeyup="moveToNext(this, 2)">
                                <input type="text" maxlength="1" class="otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold" onkeyup="moveToNext(this, 3)">
                                <input type="text" maxlength="1" class="otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold" onkeyup="moveToNext(this, 4)">
                                <input type="text" maxlength="1" class="otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg font-semibold" onkeyup="moveToNext(this, 5)">
                            </div>
                        </div>
                        
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label class="block text-sm font-medium text-gray-700">SMS OTP</label>
                                <div id="smsOtpTimer" class="text-sm otp-countdown hidden">Resend in <span id="smsCountdown">60</span>s</div>
                            </div>
                            <div class="flex space-x-2">
                                <input type="text" maxlength="1" class="sms-otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-semibold" onkeyup="moveToNextSMS(this, 0)" onpaste="handleOTPPaste(event, 'sms')">
                                <input type="text" maxlength="1" class="sms-otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-semibold" onkeyup="moveToNextSMS(this, 1)">
                                <input type="text" maxlength="1" class="sms-otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-semibold" onkeyup="moveToNextSMS(this, 2)">
                                <input type="text" maxlength="1" class="sms-otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-semibold" onkeyup="moveToNextSMS(this, 3)">
                                <input type="text" maxlength="1" class="sms-otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-semibold" onkeyup="moveToNextSMS(this, 4)">
                                <input type="text" maxlength="1" class="sms-otp-input w-12 h-12 text-center border-2 border-gray-200 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 text-lg font-semibold" onkeyup="moveToNextSMS(this, 5)">
                            </div>
                        </div>
                        
                        <div class="flex justify-between text-sm">
                            <button type="button" id="resendEmailBtn" onclick="resendOTP('email')" class="text-blue-600 hover:text-blue-800 font-medium flex items-center">
                                <span id="emailResendSpinner" class="loading-spinner mr-2 hidden"></span>
                                Resend Email OTP
                            </button>
                            <button type="button" id="resendSmsBtn" onclick="resendOTP('sms')" class="text-green-600 hover:text-green-800 font-medium flex items-center">
                                <span id="smsResendSpinner" class="loading-spinner mr-2 hidden"></span>
                                Resend SMS OTP
                            </button>
                        </div>
                        
                        <div class="bg-blue-50 rounded-xl p-4">
                            <p class="text-sm text-blue-800">
                                <span class="font-semibold"> OTP Send:</span> Check your email and SMS for verification codes. 
                                OTPs are valid for 10 minutes.
                            </p>
                        </div>
                        
                        <button type="submit" id="verifyBtn" class="w-full bg-gradient-to-r from-green-600 via-blue-600 to-purple-600 text-white py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all transform hover:scale-105 flex items-center justify-center">
                            <span id="verifySpinner" class="loading-spinner mr-2 hidden"></span>
                            Verify & Create Account
                        </button>
                        
                        <button type="button" onclick="backToStep1()" class="w-full text-gray-600 hover:text-gray-800 py-2">
                            ‚Üê Back to Registration
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="mt-6 text-center">
                <p class="text-gray-600">Already have an account? 
                    <button onclick="closeModal('signupModal'); openModal('loginModal')" class="text-green-600 hover:text-green-800 font-semibold">Sign In</button>
                </p>
            </div>
            <button onclick="closeModal('signupModal')" class="mt-4 w-full text-gray-500 hover:text-gray-700 py-2">Cancel</button>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal">
        <div class="bg-gradient-to-br from-white to-gray-50 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl border border-gray-200">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-2xl">üîë</span>
                </div>
                <h2 class="text-3xl font-bold gradient-text">Reset Password</h2>
                <p class="text-gray-600 mt-2">Enter your email to receive reset instructions</p>
            </div>
            <form onsubmit="handleForgotPassword(event)">
                <div class="space-y-5">
                    <div class="relative">
                        <input type="email" id="forgotEmail" placeholder="Email Address" required 
                               class="w-full p-4 pl-12 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all bg-white">
                        <span class="absolute left-4 top-4 text-gray-400">üìß</span>
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 text-white py-4 rounded-xl font-semibold text-lg hover:shadow-xl transition-all transform hover:scale-105">
                        Send Reset Password Link
                    </button>
                </div>
            </form>
            <div class="mt-6 text-center">
                <p class="text-gray-600">Remember your password? 
                    <button onclick="closeModal('forgotPasswordModal'); openModal('loginModal')" class="text-orange-600 hover:text-orange-800 font-semibold">Sign In</button>
                </p>
            </div>
            <button onclick="closeModal('forgotPasswordModal')" class="mt-4 w-full text-gray-500 hover:text-gray-700 py-2">Cancel</button>
        </div>
    </div>

    <!-- Delivery Details Modal -->
    <div id="deliveryModal" class="modal">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold mb-6 text-center gradient-text">Delivery & Installation Details</h2>
            <div class="space-y-4">
                <div class="bg-blue-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-2">Delivery by</h3>
                    <p class="text-gray-700">12 Oct, Sunday</p>
                    <p class="text-sm text-gray-600">if ordered before 2:25 AM</p>
                </div>
                <div class="bg-gray-50 rounded-lg p-4">
                    <h3 class="font-semibold text-gray-800 mb-2">Installation Details</h3>
                    <p class="text-gray-700">This product doesn't require installation</p>
                </div>
            </div>
            <button onclick="closeModal('deliveryModal')" class="mt-6 w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                Got it
            </button>
        </div>
    </div>

    <!-- All Offers Modal -->
    <div id="allOffersModal" class="modal">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full mx-4 shadow-2xl max-h-[80vh] overflow-y-auto">
            <h2 class="text-2xl font-bold mb-6 text-center gradient-text">All Available Offers</h2>
            <div id="allOffersList" class="space-y-4">
                <!-- Offers will be populated here -->
            </div>
            <button onclick="closeModal('allOffersModal')" class="mt-6 w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                Close
            </button>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold mb-6 text-center gradient-text">Write a Review</h2>
            <form onsubmit="handleReview(event)">
                <div class="space-y-4">
                    <input type="text" id="reviewName" placeholder="Your Name" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                        <div class="flex space-x-1" id="starRating">
                            <button type="button" onclick="setRating(1)" class="text-2xl text-gray-300 hover:text-yellow-400">‚òÖ</button>
                            <button type="button" onclick="setRating(2)" class="text-2xl text-gray-300 hover:text-yellow-400">‚òÖ</button>
                            <button type="button" onclick="setRating(3)" class="text-2xl text-gray-300 hover:text-yellow-400">‚òÖ</button>
                            <button type="button" onclick="setRating(4)" class="text-2xl text-gray-300 hover:text-yellow-400">‚òÖ</button>
                            <button type="button" onclick="setRating(5)" class="text-2xl text-gray-300 hover:text-yellow-400">‚òÖ</button>
                        </div>
                    </div>
                    <textarea id="reviewText" placeholder="Write your review..." required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent h-24"></textarea>
                    <button type="submit" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                        Submit Review
                    </button>
                </div>
            </form>
            <button onclick="closeModal('reviewModal')" class="mt-4 w-full text-gray-600 hover:text-gray-800">Cancel</button>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div id="cartSidebar" class="fixed right-0 top-0 h-full w-80 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50">
        <div class="p-6 border-b">
            <div class="flex justify-between items-center">
                <h2 class="text-xl font-bold">Shopping Cart</h2>
                <button onclick="toggleCart()" class="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
        </div>
        <div id="cartItems" class="p-6 flex-1 overflow-y-auto">
            <p class="text-gray-500 text-center">Your cart is empty</p>
        </div>
        <div class="p-6 border-t">
            <div class="flex justify-between items-center mb-4">
                <span class="font-semibold">Total: </span>
                <span id="cartTotal" class="font-bold text-xl">‚Çπ0</span>
            </div>
            <a href="periperiapi.html" target="_blank">
            <button onclick="checkout()" class="w-full bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                Checkout
            </button></a>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg">
        <span id="notificationText"></span>
    </div>


     <!-- Premium Footer -->
    <footer class="bg-gradient-to-br from-gray-900 via-purple-900 to-gray-800 text-white">
        <!-- Main Footer Content -->
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Company Info -->
                <div class="space-y-4">
                    <div class="flex items-center space-x-2">
                        <span class="text-3xl">üçø</span>
                        <h3 class="text-2xl font-bold">Snackester</h3>
                    </div>
                    <p class="text-gray-300 leading-relaxed">
                        Premium handcrafted snacks made with love and delivered fresh to your doorstep. Experience the perfect blend of taste and health.
                    </p>
                    <div class="flex space-x-4">
                        <a href="https://www.instagram.com/snackester_offical?igsh=eTdmbXk1Z2QyNnZ4" target="_blank" rel="noopener noreferrer" class="social-btn bg-gradient-to-r from-pink-500 to-purple-600 p-3 rounded-full group">
                            <svg class="w-5 h-5 text-white transition-transform group-hover:rotate-12" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                        <a href="mailto:snackester1909@gmail.com" class="social-btn bg-gradient-to-r from-red-500 to-red-600 p-3 rounded-full group">
                            <svg class="w-5 h-5 text-white transition-transform group-hover:scale-110" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-.904.732-1.636 1.636-1.636h.91L12 10.09l9.455-6.269h.909c.904 0 1.636.732 1.636 1.636z"/>
                            </svg>
                        </a>
                        <a href="tel:+918603523912" class="social-btn bg-gradient-to-r from-blue-500 to-blue-600 p-3 rounded-full group">
                            <svg class="w-5 h-5 text-white transition-transform group-hover:rotate-12" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                            </svg>
                        </a>
                        <a href="https://wa.me/918603523912" target="_blank" rel="noopener noreferrer" class="social-btn bg-gradient-to-r from-green-400 to-green-600 p-3 rounded-full group">
                            <svg class="w-5 h-5 text-white transition-transform group-hover:scale-110" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"/>
                            </svg>
                        </a>
                        <a href="#" class="social-btn bg-gradient-to-r from-blue-600 to-blue-700 p-3 rounded-full group">
                            <svg class="w-5 h-5 text-white transition-transform group-hover:-rotate-12" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                            </svg>
                        </a>
                       
                    </div>
                </div>

                <!-- Quick Links -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-purple-300">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#home" class="text-gray-300 hover:text-white hover:pl-2 transition-all duration-200">Home</a></li>
                        <li><a href="#products" class="text-gray-300 hover:text-white hover:pl-2 transition-all duration-200">Our Products</a></li>
                        <li><a href="#about" class="text-gray-300 hover:text-white hover:pl-2 transition-all duration-200">About Us</a></li>
                        <li><a href="#contact" class="text-gray-300 hover:text-white hover:pl-2 transition-all duration-200">Contact</a></li>
                        <li><a href="#" onclick="openTrackOrderModal()" class="text-gray-300 hover:text-white hover:pl-2 transition-all duration-200">Track Order</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white hover:pl-2 transition-all duration-200">Bulk Orders</a></li>
                    </ul>
                </div>

                <!-- Product Categories -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-purple-300">Our Specialties</h4>
                    <ul class="space-y-2">
                        <li class="text-gray-300 flex items-center"><span class="mr-2">üçÖ</span>Tangy Tomato Makhana</li>
                        <li class="text-gray-300 flex items-center"><span class="mr-2">üå∂Ô∏è</span>Peri Peri Makhana</li>
                        <li class="text-gray-300 flex items-center"><span class="mr-2">ü´ò</span>Chat Masala Makhana</li>
                       
                    </ul>
                </div>

                <!-- Contact Info -->
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-purple-300">Get In Touch</h4>
                    <div class="space-y-3">
                        <div class="flex items-start space-x-3">
                            <span class="text-purple-400 mt-1">üìç</span>
                            <div>
                                <p class="text-gray-300 text-sm">
                                    <a href="https://maps.app.goo.gl/QKrs77qseDTf53rv9?g_st=aw" target="_blank" rel="noopener noreferrer" class="hover:text-white transition-colors">
                                        Longowal, Sangrur,<br>Punjab 148106, India
                                    </a>
                                </p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-purple-400">üìß</span>
                            <a href="mailto:snackester1909@gmail.com" class="text-gray-300 hover:text-white transition-colors text-sm">
                                snackester1909@gmail.com
                            </a>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-purple-400">üì±</span>
                            <a href="tel:+918603523912" class="text-gray-300 hover:text-white transition-colors text-sm">
                                +91-8603523912
                            </a>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="text-purple-400">üïí</span>
                            <p class="text-gray-300 text-sm">Mon - Sat: 9AM - 8PM</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Newsletter Section -->
        <div class="border-t border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="text-center">
                    <h4 class="text-xl font-semibold mb-2">Stay Updated with Our Latest Offers! üéâ</h4>
                    <p class="text-gray-300 mb-6">Subscribe to get exclusive deals and new product launches</p>
                    <div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-3 max-w-md mx-auto">
                        <input type="email" placeholder="Enter your email" class="w-full sm:flex-1 px-4 py-2 rounded-lg bg-gray-800 border border-gray-600 text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        <button class="w-full sm:w-auto bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-2 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105">
                            Subscribe
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Footer -->
        <div class="border-t border-gray-700 bg-gray-900">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                    <div class="flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-6">
                        <p class="text-gray-400 text-sm">&copy; 2025 Snackester. All rights reserved.</p>
                        <div class="flex space-x-4 text-sm">
                            <a href="privacy-policy.html" class="text-gray-400 hover:text-white transition-colors">Privacy Policy</a>
                            <a href="terms-and-conditions.html" class="text-gray-400 hover:text-white transition-colors">Terms of Service</a>
                            <a href="refund-policy.html" class="text-gray-400 hover:text-white transition-colors">Refund Policy</a>
                             <a href="contact-us.html" class="text-gray-400 hover:text-white transition-colors">Contact Us</a>
                            <a href="shipping-policy.html" class="text-gray-400 hover:text-white transition-colors">Shipping Policy</a>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <span class="text-gray-400 text-sm">We Accept:</span>
                        <div class="flex space-x-2">
                            <span class="bg-gray-800 px-2 py-1 rounded text-xs">üí≥ Cards</span>
                            <span class="bg-gray-800 px-2 py-1 rounded text-xs">üì± UPI</span>
                            <span class="bg-gray-800 px-2 py-1 rounded text-xs">üíµ COD</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        // Global variables
        let currentSlide = 0;
        let currentRating = 0;
        let cart = [];
        let users = JSON.parse(localStorage.getItem('snackesterUsers') || '[]');
        let currentUser = JSON.parse(localStorage.getItem('snackesterCurrentUser') || 'null');
        let reviews = JSON.parse(localStorage.getItem('snackesterReviews') || '[]');
        let currentQuantity = 1;
        let basePrice = 249;
        let currentPrice = 249;
        let appliedCoupon = null;
        let wishlist = JSON.parse(localStorage.getItem('snackesterWishlist') || '[]');
        let rememberMe = false;

        // OTP System Variables
        let pendingUser = null;
        let generatedEmailOTP = '';
        let generatedSMSOTP = '';
        let emailOTPExpiry = null;
        let smsOTPExpiry = null;
        let emailCountdownTimer = null;
        let smsCountdownTimer = null;

        // Initialize with sample reviews
        if (reviews.length === 0) {
            reviews = [
                {
                    name: "Abhishek Sagar",
                    rating: 5,
                    text: "Absolutely delicious! The peri peri flavor is perfect. Will definitely order again.",
                    date: "2025-09-25",
                    verified: true
                },
                {
                    name: "Sahbaj Alam",
                    rating: 4,
                    text: "Great quality makhana with amazing taste. Healthy snacking option for the family.",
                    date: "2025-09-24",
                    verified: true
                },
                {
                    name: "Anya",
                    rating: 5,
                    text: "Best makhana I've ever tasted! The packaging is also very good. Highly recommended.",
                    date: "2025-09-23",
                    verified: true
                }
            ];
            localStorage.setItem('snackesterReviews', JSON.stringify(reviews));
        }

        // Real OTP Generation System
        function generateRealOTP() {
            return Math.floor(100000 + Math.random() * 900000).toString();
        }

        // Simulate sending OTP (in real app, this would call backend API)
        async function sendOTP(type, contact, otp) {
            return new Promise((resolve) => {
                // Simulate API delay
                setTimeout(() => {
                    console.log(`${type.toUpperCase()} OTP sent to ${contact}: ${otp}`);
                    
                    // Show demo OTP in UI for testing
                    const demoMessage = `Demo ${type.toUpperCase()} OTP: ${otp} (Valid for 10 minutes)`;
                    showNotification(demoMessage, 'info');
                    
                    // In real app, this would make API call to send actual OTP
                    resolve(true);
                }, 1000);
            });
        }

        // Image slider functionality
        function changeSlide(index) {
            currentSlide = index;
            const track = document.getElementById('slideTrack');
            track.style.transform = `translateX(-${index * 100}%)`;
            
            // Update dots
            document.querySelectorAll('.slide-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
                dot.style.backgroundColor = i === index ? '#667eea' : '#d1d5db';
            });
        }

        // Auto-slide functionality
        setInterval(() => {
            currentSlide = (currentSlide + 1) % 3;
            changeSlide(currentSlide);
        }, 4000);

        // Quantity management
        function updateQuantity(change) {
            const newQuantity = currentQuantity + change;
            if (newQuantity >= 1 && newQuantity <= 10) {
                currentQuantity = newQuantity;
                document.getElementById('quantity').textContent = currentQuantity;
                updatePriceDisplay();
            }
        }

        // Price calculation and display
        function updatePriceDisplay() {
            const totalPrice = currentPrice * currentQuantity;
            document.getElementById('displayPrice').textContent = `‚Çπ${totalPrice}`;
            document.getElementById('cartButtonPrice').textContent = totalPrice;
            
            if (appliedCoupon) {
                const originalTotal = basePrice * currentQuantity;
                const savings = originalTotal - totalPrice;
                document.getElementById('savingsAmount').textContent = savings;
            }
        }

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Password validation functions
        function validatePassword() {
            const password = document.getElementById('signupPassword').value;
            
            // Check requirements
            const hasLength = password.length >= 8;
            const hasCapital = /[A-Z]/.test(password);
            const hasNumber = /\d/.test(password);
            const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);
            
            // Update UI
            updateRequirement('req-length', hasLength);
            updateRequirement('req-capital', hasCapital);
            updateRequirement('req-number', hasNumber);
            updateRequirement('req-special', hasSpecial);
            
            validatePasswordMatch();
            updateSignupButton();
        }

        function validatePasswordMatch() {
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const hasMatch = password === confirmPassword && password.length > 0;
            
            updateRequirement('req-match', hasMatch);
            updateSignupButton();
        }

        function updateRequirement(id, isValid) {
            const element = document.getElementById(id);
            const icon = element.querySelector('span');
            
            if (isValid) {
                element.classList.remove('text-gray-500');
                element.classList.add('text-green-600');
                icon.textContent = '‚úÖ';
            } else {
                element.classList.remove('text-green-600');
                element.classList.add('text-gray-500');
                icon.textContent = '‚ùå';
            }
        }

        function updateSignupButton() {
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            const hasLength = password.length >= 8;
            const hasCapital = /[A-Z]/.test(password);
            const hasNumber = /\d/.test(password);
            const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(password);
            const hasMatch = password === confirmPassword && password.length > 0;
            
            const allValid = hasLength && hasCapital && hasNumber && hasSpecial && hasMatch && agreeTerms;
            
            const button = document.getElementById('signupBtn');
            if (allValid) {
                button.disabled = false;
                button.classList.remove('bg-gray-400', 'cursor-not-allowed');
                button.classList.add('bg-gradient-to-r', 'from-green-600', 'to-blue-600', 'hover:shadow-xl', 'transform', 'hover:scale-105');
            } else {
                button.disabled = true;
                button.classList.add('bg-gray-400', 'cursor-not-allowed');
                button.classList.remove('bg-gradient-to-r', 'from-green-600', 'to-blue-600', 'hover:shadow-xl', 'transform', 'hover:scale-105');
            }
        }

        function togglePassword(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            
            if (input.type === 'password') {
                input.type = 'text';
                button.textContent = 'üôà';
            } else {
                input.type = 'password';
                button.textContent = 'üëÅÔ∏è';
            }
        }

        // Advanced OTP System
        async function handleSignupStep1(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;
            const phone = document.getElementById('signupPhone').value;

            // Check if user already exists
            if (users.find(user => user.email === email)) {
                showNotification('User already exists! Please login instead.', 'error');
                return;
            }

            // Store pending user data
            pendingUser = {
                id: Date.now(),
                name,
                email,
                password,
                phone,
                createdAt: new Date().toISOString()
            };

            // Generate real OTPs
            generatedEmailOTP = generateRealOTP();
            generatedSMSOTP = generateRealOTP();
            
            // Set expiry times (10 minutes from now)
            const expiryTime = new Date(Date.now() + 10 * 60 * 1000);
            emailOTPExpiry = expiryTime;
            smsOTPExpiry = expiryTime;

            // Send OTPs
            showNotification('Sending verification codes...', 'info');
            
            try {
                await Promise.all([
                    sendOTP('email', email, generatedEmailOTP),
                    sendOTP('sms', phone, generatedSMSOTP)
                ]);
                
                // Show step 2
                document.getElementById('signupStep1').classList.add('hidden');
                document.getElementById('signupStep2').classList.remove('hidden');
                
                // Start countdown timers
                startOTPCountdown('email');
                startOTPCountdown('sms');
                
                showNotification(`Verification codes sent to ${email} and ${phone}`, 'success');
            } catch (error) {
                showNotification('Failed to send OTP. Please try again.', 'error');
            }
        }

        function startOTPCountdown(type) {
            const countdownElement = document.getElementById(`${type}Countdown`);
            const timerElement = document.getElementById(`${type}OtpTimer`);
            const resendButton = document.getElementById(`resend${type === 'email' ? 'Email' : 'Sms'}Btn`);
            
            let timeLeft = 60;
            timerElement.classList.remove('hidden');
            resendButton.disabled = true;
            resendButton.classList.add('opacity-50', 'cursor-not-allowed');
            
            const timer = setInterval(() => {
                timeLeft--;
                countdownElement.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    timerElement.classList.add('hidden');
                    resendButton.disabled = false;
                    resendButton.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }, 1000);
            
            if (type === 'email') {
                emailCountdownTimer = timer;
            } else {
                smsCountdownTimer = timer;
            }
        }

        async function resendOTP(type) {
            const spinner = document.getElementById(`${type}ResendSpinner`);
            const button = document.getElementById(`resend${type === 'email' ? 'Email' : 'Sms'}Btn`);
            
            spinner.classList.remove('hidden');
            button.disabled = true;
            
            try {
                if (type === 'email') {
                    generatedEmailOTP = generateRealOTP();
                    emailOTPExpiry = new Date(Date.now() + 10 * 60 * 1000);
                    await sendOTP('email', pendingUser.email, generatedEmailOTP);
                } else {
                    generatedSMSOTP = generateRealOTP();
                    smsOTPExpiry = new Date(Date.now() + 10 * 60 * 1000);
                    await sendOTP('sms', pendingUser.phone, generatedSMSOTP);
                }
                
                startOTPCountdown(type);
                showNotification(`New ${type.toUpperCase()} OTP sent!`, 'success');
            } catch (error) {
                showNotification(`Failed to resend ${type.toUpperCase()} OTP`, 'error');
            } finally {
                spinner.classList.add('hidden');
            }
        }

        function handleOTPPaste(event, type) {
            event.preventDefault();
            const pastedData = event.clipboardData.getData('text');
            const otpDigits = pastedData.replace(/\D/g, '').slice(0, 6);
            
            const inputs = document.querySelectorAll(type === 'email' ? '.otp-input' : '.sms-otp-input');
            
            for (let i = 0; i < otpDigits.length && i < inputs.length; i++) {
                inputs[i].value = otpDigits[i];
            }
            
            if (otpDigits.length === 6) {
                inputs[5].focus();
            }
        }

        async function handleOTPVerification(event) {
            event.preventDefault();
            
            const spinner = document.getElementById('verifySpinner');
            const button = document.getElementById('verifyBtn');
            
            spinner.classList.remove('hidden');
            button.disabled = true;
            
            try {
                // Get OTP values
                const emailOTP = Array.from(document.querySelectorAll('.otp-input')).map(input => input.value).join('');
                const smsOTP = Array.from(document.querySelectorAll('.sms-otp-input')).map(input => input.value).join('');
                
                // Check if OTPs are expired
                const now = new Date();
                if (now > emailOTPExpiry || now > smsOTPExpiry) {
                    showNotification('OTP codes have expired. Please request new ones.', 'error');
                    return;
                }
                
                // Verify OTPs
                if (emailOTP === generatedEmailOTP && smsOTP === generatedSMSOTP) {
                    // Save user
                    users.push(pendingUser);
                    localStorage.setItem('snackesterUsers', JSON.stringify(users));
                    
                    showNotification('Account created successfully! Please login.', 'success');
                    closeModal('signupModal');
                    resetSignupForm();
                    
                    // Auto-open login modal
                    setTimeout(() => {
                        openModal('loginModal');
                    }, 1000);
                } else {
                    showNotification('Invalid OTP codes. Please check and try again.', 'error');
                }
            } catch (error) {
                showNotification('Verification failed. Please try again.', 'error');
            } finally {
                spinner.classList.add('hidden');
                button.disabled = false;
            }
        }

        function moveToNext(current, index) {
            if (current.value.length === 1 && index < 5) {
                const nextInput = document.querySelectorAll('.otp-input')[index + 1];
                if (nextInput) nextInput.focus();
            }
        }

        function moveToNextSMS(current, index) {
            if (current.value.length === 1 && index < 5) {
                const nextInput = document.querySelectorAll('.sms-otp-input')[index + 1];
                if (nextInput) nextInput.focus();
            }
        }

        function backToStep1() {
            document.getElementById('signupStep2').classList.add('hidden');
            document.getElementById('signupStep1').classList.remove('hidden');
            
            // Clear timers
            if (emailCountdownTimer) clearInterval(emailCountdownTimer);
            if (smsCountdownTimer) clearInterval(smsCountdownTimer);
        }

        function resetSignupForm() {
            // Reset step 1
            document.getElementById('signupName').value = '';
            document.getElementById('signupEmail').value = '';
            document.getElementById('signupPassword').value = '';
            document.getElementById('confirmPassword').value = '';
            document.getElementById('signupPhone').value = '';
            document.getElementById('agreeTerms').checked = false;
            
            // Reset step 2
            document.querySelectorAll('.otp-input, .sms-otp-input').forEach(input => input.value = '');
            
            // Reset UI
            document.getElementById('signupStep2').classList.add('hidden');
            document.getElementById('signupStep1').classList.remove('hidden');
            
            // Reset validation
            ['req-length', 'req-capital', 'req-number', 'req-special', 'req-match'].forEach(id => {
                updateRequirement(id, false);
            });
            updateSignupButton();
            
            // Clear timers and reset variables
            if (emailCountdownTimer) clearInterval(emailCountdownTimer);
            if (smsCountdownTimer) clearInterval(smsCountdownTimer);
            pendingUser = null;
            generatedEmailOTP = '';
            generatedSMSOTP = '';
        }

        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            rememberMe = document.querySelector('input[type="checkbox"]').checked;

            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                if (rememberMe) {
                    localStorage.setItem('snackesterCurrentUser', JSON.stringify(user));
                    localStorage.setItem('snackesterRememberMe', 'true');
                } else {
                    sessionStorage.setItem('snackesterCurrentUser', JSON.stringify(user));
                }
                showNotification(`Welcome back, ${user.name}!`, 'success');
                closeModal('loginModal');
                updateUIForLoggedInUser();
            } else {
                showNotification('Invalid email or password!', 'error');
            }
            
            // Clear form
            document.getElementById('loginEmail').value = '';
            document.getElementById('loginPassword').value = '';
        }

        // Wishlist Functions
        function toggleWishlist() {
            if (!currentUser) {
                showNotification('Please login to add items to wishlist', 'error');
                openModal('loginModal');
                return;
            }

            const productId = 1; // Tangy Tomato Makhana ID
            const isInWishlist = wishlist.some(item => item.id === productId && item.userId === currentUser.id);
            
            if (isInWishlist) {
                wishlist = wishlist.filter(item => !(item.id === productId && item.userId === currentUser.id));
                document.getElementById('wishlistIcon').textContent = 'ü§ç';
                showNotification('Removed from wishlist', 'info');
            } else {
                const wishlistItem = {
                    id: productId,
                    userId: currentUser.id,
                    name: "Tangy Tomato Makhana",
                    price: basePrice,
                    weight: "80g",
                    addedAt: new Date().toISOString()
                };
                wishlist.push(wishlistItem);
                document.getElementById('wishlistIcon').textContent = '‚ù§Ô∏è';
                showNotification('Added to wishlist!', 'success');
            }
            
            localStorage.setItem('snackesterWishlist', JSON.stringify(wishlist));
        }

        // Search Functions
        function handleSearch(event) {
            const query = event.target.value.toLowerCase();
            const searchResults = document.getElementById('searchResults');
            
            if (query.length < 2) {
                searchResults.classList.add('hidden');
                return;
            }
            
            const products = [
                { name: 'Tangy Tomato Makhana', price: '‚Çπ249', category: 'Makhana', link: '#' },
                { name: 'Peri Peri Makhana', price: '‚Çπ259', category: 'Makhana', link: 'periperi.html' },
                { name: 'Chat Masala Makhana', price: '‚Çπ239', category: 'Makhana', link: 'chat masala.html' },
                { name: 'Roasted Almonds', price: '‚Çπ399', category: 'Nuts', link: '#' },
                { name: 'Mixed Nuts', price: '‚Çπ499', category: 'Nuts', link: '#' },
                { name: 'Healthy Trail Mix', price: '‚Çπ349', category: 'Mix', link: '#' }
            ];
            
            const filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(query) || 
                product.category.toLowerCase().includes(query)
            );
            
            if (filteredProducts.length > 0) {
                searchResults.innerHTML = filteredProducts.map(product => `
                    <div class="p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0" onclick="navigateToProduct('${product.link}', '${product.name}')">
                        <div class="flex justify-between items-center">
                            <div>
                                <div class="font-medium text-gray-800">${product.name}</div>
                                <div class="text-sm text-gray-600">${product.category}</div>
                            </div>
                            <div class="text-green-600 font-semibold">${product.price}</div>
                        </div>
                    </div>
                `).join('');
                searchResults.classList.remove('hidden');
            } else {
                searchResults.innerHTML = '<div class="p-3 text-gray-500 text-center">No products found</div>';
                searchResults.classList.remove('hidden');
            }
        }

        function navigateToProduct(link, productName) {
            document.getElementById('searchInput').value = productName;
            document.getElementById('searchResults').classList.add('hidden');
            
            if (link !== '#') {
                window.open(link, '_blank', 'noopener,noreferrer');
                showNotification(`Opening ${productName}...`, 'info');
            } else {
                showNotification(`${productName} - Coming Soon!`, 'info');
            }
        }

        function selectSearchResult(productName) {
            document.getElementById('searchInput').value = productName;
            document.getElementById('searchResults').classList.add('hidden');
            showNotification(`Searching for ${productName}...`, 'info');
        }

        // Forgot Password Function
        function handleForgotPassword(event) {
            event.preventDefault();
            const email = document.getElementById('forgotEmail').value;
            
            const user = users.find(u => u.email === email);
            if (user) {
                showNotification('Password reset link sent to your email!', 'success');
                closeModal('forgotPasswordModal');
            } else {
                showNotification('Email not found in our records', 'error');
            }
            
            document.getElementById('forgotEmail').value = '';
        }

        // Pincode Functions
        function handlePincodeChange(event) {
            if (event.key === 'Enter') {
                checkPincode();
            }
        }

        function changePincode() {
            const pincode = document.getElementById('pincodeInput').value;
            if (pincode.length === 6) {
                checkPincode();
            } else {
                showNotification('Please enter a valid 6-digit pincode', 'error');
            }
        }

        function checkPincode() {
            const pincode = document.getElementById('pincodeInput').value;
            const pincodeResult = document.getElementById('pincodeResult');
            
            // Mock pincode database
            const pincodeData = {
                '148106': 'Longowal, Punjab',
                '824232': 'Fatehpur, Gaya, Bihar',
                '400001': 'Mumbai, Maharashtra',
                '560001': 'Bangalore, Karnataka',
                '700001': 'Kolkata, West Bengal',
                '110001': 'New Delhi, Delhi',
'400001': 'Mumbai, Maharashtra',
'700001': 'Kolkata, West Bengal',
'600001': 'Chennai, Tamil Nadu',
'560001': 'Bengaluru, Karnataka',
'500001': 'Hyderabad, Telangana',
'411001': 'Pune, Maharashtra',
'380001': 'Ahmedabad, Gujarat',
'395003': 'Surat, Gujarat',
'226001': 'Lucknow, Uttar Pradesh',
'302001': 'Jaipur, Rajasthan',
'208001': 'Kanpur, Uttar Pradesh',
'440001': 'Nagpur, Maharashtra',
'452001': 'Indore, Madhya Pradesh',
'462001': 'Bhopal, Madhya Pradesh',
'800001': 'Patna, Bihar',
'390001': 'Vadodara, Gujarat',
'141001': 'Ludhiana, Punjab',
'282001': 'Agra, Uttar Pradesh',
'221001': 'Varanasi, Uttar Pradesh',
'250001': 'Meerut, Uttar Pradesh',
'160017': 'Chandigarh, Chandigarh',
'360001': 'Rajkot, Gujarat',
'143001': 'Amritsar, Punjab',
'625001': 'Madurai, Tamil Nadu',
'834001': 'Ranchi, Jharkhand',
'831001': 'Jamshedpur, Jharkhand',
'641001': 'Coimbatore, Tamil Nadu',
'520001': 'Vijayawada, Andhra Pradesh',
'530001': 'Visakhapatnam, Andhra Pradesh',
'570001': 'Mysore, Karnataka',
'695001': 'Thiruvananthapuram, Kerala',
'682001': 'Kochi, Kerala',
'673001': 'Kozhikode, Kerala',
'781001': 'Guwahati, Assam',
'400013': 'Navi Mumbai, Maharashtra',
'160036': 'Panchkula, Haryana',
'600006': 'Chennai (T. Nagar), Tamil Nadu',
'411014': 'Hinjewadi (Pune suburb), Maharashtra',
'500081': 'Gachibowli (Hyderabad suburb), Telangana',
'395007': 'Varachha (Surat suburb), Gujarat',
'201001': 'Ghaziabad, Uttar Pradesh',
'110006': 'R.K. Puram (New Delhi), Delhi',
'395010': 'Surat G.P.O. area, Gujarat',
'400701': 'Thane, Maharashtra',
'380015': 'Gandhinagar, Gujarat',
'144001': 'Jalandhar, Punjab',
'560002': 'Bengaluru (City GPO area), Karnataka',
'201010': 'Noida, Uttar Pradesh',
'600028': 'Kanchipuram, Tamil Nadu',
'500034': 'Secunderabad, Telangana',
'400601': 'Kalyan, Maharashtra',
'700016': 'Howrah, West Bengal',
'110055': 'Dwarka, New Delhi, Delhi',
'452010': 'Indore (Rau/around), Madhya Pradesh',
'302019': 'Jaipur (Shivaji Nagar area), Rajasthan',
'302017': 'Jaipur (Malviya Nagar area), Rajasthan',
'400050': 'Bandra East, Mumbai, Maharashtra',
'500045': 'Hitech City PO, Hyderabad, Telangana',
'110092': 'Rohini, New Delhi, Delhi',
'380005': 'Maninagar (Ahmedabad suburb), Gujarat',
'226002': 'Hazratganj (Lucknow), Uttar Pradesh',
'110049': 'Janakpuri, New Delhi, Delhi',
'411038': 'Ambegaon (Pune), Maharashtra',
'250002': 'Saharanpur/Meerut region, Uttar Pradesh',
'141008': 'Ferozepur Road area (Ludhiana), Punjab',
'600017': 'Perambur (Chennai), Tamil Nadu',
'641018': 'Peelamedu (Coimbatore), Tamil Nadu',
'110024': 'Connaught Place (New Delhi), Delhi',
'302020': 'Jaipur Central, Rajasthan',
'700091': 'Salt Lake (Kolkata), West Bengal',
'560076': 'Whitefield (Bengaluru), Karnataka',
'380009': 'Jamnagar (main), Gujarat',
'250010': 'Modinagar/Meerut area, Uttar Pradesh',
'452008': 'Indore (Main), Madhya Pradesh',
'462016': 'Bhopal (Nirala Nagar area), Madhya Pradesh',
'395004': 'Udhana (Surat), Gujarat',
'500020': 'Kukatpally, Hyderabad, Telangana',
'201301': 'Greater Noida, Uttar Pradesh',
'110015': 'Connaught Place extension (New Delhi), Delhi',
'400058': 'Andheri East, Mumbai, Maharashtra',
'700070': 'Kolkata GPO surrounding area, West Bengal',
'600079': 'Ambattur (Chennai), Tamil Nadu',
'411045': 'Pune (Khadakwasla/nearby), Maharashtra',
'380025': 'Ahmedabad (SG Highway area), Gujarat',
'226010': 'Kanpur (Civil Lines), Uttar Pradesh',
'302015': 'Mansarovar (Jaipur), Rajasthan',
'110014': 'Barakhamba Road (New Delhi), Delhi',
'500072': 'Malkajgiri, Hyderabad, Telangana',
'400604': 'Dombivli, Maharashtra',
'411028': 'Pune (Koregaon Park area), Maharashtra',
'380027': 'Ahmedabad (Gota area), Gujarat',
'700013': 'Kolkata (Ballygunge area), West Bengal',
'110046': 'Defence Colony, New Delhi, Delhi',
'560066': 'Electronic City (Bengaluru), Karnataka',
'400069': 'Andheri West, Mumbai, Maharashtra',
'600042': 'Chromepet (Chennai), Tamil Nadu',
'302016': 'Tonk Road (Jaipur), Rajasthan',
'452001': 'Indore GPO (duplicate included as common head PIN), Madhya Pradesh',
'226017': 'Kanpur City (duplicate head PIN example), Uttar Pradesh'
            };
            
            if (pincodeData[pincode]) {
                pincodeResult.innerHTML = `<div class="text-sm text-gray-600">üìç ${pincodeData[pincode]} - ${pincode}</div>`;
                showNotification('Pincode verified successfully!', 'success');
            } else {
                pincodeResult.innerHTML = `<div class="text-sm text-red-600">‚ùå Service not available in ${pincode}</div>`;
                showNotification('Service not available in this area', 'error');
            }
        }

        function clearPincode() {
            document.getElementById('pincodeInput').value = '';
            document.getElementById('pincodeResult').innerHTML = '';
        }

        // Offer Functions
        function showOfferDetails(offerType) {
            const offerDetails = {
                'special': 'Special Price: Get extra 57% off on selected items. Valid till stocks last.',
                'combo': 'Combo Offer: Buy 3 or more items and save 5% on total order value.',
                'buymore': 'Buy More Save More: Purchase worth ‚Çπ200 or more and get 5% discount.',
                'bank': 'Bank Offer: Get 5% cashback on Axis Bank Flipkart Debit Card up to ‚Çπ750 per month.'
            };
            
            showNotification(offerDetails[offerType] || 'Offer details not available', 'info');
        }

        function showAllOffers() {
            const allOffers = [
                { title: 'Special Price', desc: 'Get extra 57% off', icon: '%' },
                { title: 'Combo Offer', desc: 'Buy 3 or more items save 5%', icon: 'üì¶' },
                { title: 'Buy More, Save More', desc: 'Buy worth ‚Çπ200 save 5%', icon: 'üí∞' },
                { title: 'Bank Offer', desc: '5% cashback on Axis Bank Flipkart Debit Card', icon: 'üè¶' },
                { title: 'First Order', desc: 'Get 20% off on your first order', icon: 'üéâ' },
                { title: 'Free Shipping', desc: 'Free delivery on orders above ‚Çπ299', icon: 'üöö' },
                { title: 'Student Discount', desc: '15% off for students with valid ID', icon: 'üéì' },
                { title: 'Loyalty Rewards', desc: 'Earn points on every purchase', icon: '‚≠ê' },
                { title: 'Weekend Special', desc: 'Extra 10% off on weekends', icon: 'üéä' },
                { title: 'Bulk Order', desc: 'Special prices for bulk orders', icon: 'üì¶' }
            ];
            
            const allOffersList = document.getElementById('allOffersList');
            allOffersList.innerHTML = allOffers.map(offer => `
                <div class="flex items-start space-x-3 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200 hover:shadow-md transition-all cursor-pointer">
                    <div class="w-10 h-10 bg-white rounded-full flex items-center justify-center flex-shrink-0 shadow-sm">
                        <span class="text-blue-600">${offer.icon}</span>
                    </div>
                    <div class="flex-1">
                        <div class="font-semibold text-gray-800">${offer.title}</div>
                        <div class="text-sm text-gray-600">${offer.desc}</div>
                        <div class="text-xs text-blue-600 hover:underline mt-1">Terms & Conditions</div>
                    </div>
                </div>
            `).join('');
            
            openModal('allOffersModal');
        }

        function showDeliveryDetails() {
            openModal('deliveryModal');
        }

        function showOtherSellers() {
            const sellers = [
                { name: 'Snackester Team', rating: '4.8/5', price: '‚Çπ249' },
                { name: 'Healthy Bites Co.', rating: '4.6/5', price: '‚Çπ259' },
                { name: 'Nature\'s Best', rating: '4.5/5', price: '‚Çπ269' }
            ];
            
            let sellersHtml = sellers.map(seller => `
                <div class="p-3 border border-gray-200 rounded-lg">
                    <div class="font-medium">${seller.name}</div>
                    <div class="text-sm text-gray-600">Rating: ${seller.rating}</div>
                    <div class="text-green-600 font-semibold">${seller.price}</div>
                </div>
            `).join('');
            
            showNotification('Other sellers: ' + sellers.map(s => s.name).join(', '), 'info');
        }

        function updateUIForLoggedInUser() {
            if (currentUser) {
                const navButtons = document.getElementById('navButtons');
                navButtons.innerHTML = `
                    <div class="relative group">
                        <button class="flex items-center space-x-2 text-gray-700 hover:text-gray-900 px-3 py-2 rounded-lg hover:bg-gray-100 transition-all">
                            <span class="w-8 h-8 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center text-white text-sm font-bold">
                                ${currentUser.name.charAt(0).toUpperCase()}
                            </span>
                            <span>Hello, ${currentUser.name}</span>
                            <span class="text-xs">‚ñº</span>
                        </button>
                        
                        <!-- Dropdown Menu -->
                        <div class="absolute right-0 top-full mt-2 w-48 bg-white rounded-xl shadow-xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                            <div class="py-2">
                                <button onclick="showProfile()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 flex items-center space-x-2">
                                    <span>üë§</span>
                                    <span>My Profile</span>
                                </button>
                                <button onclick="showOrders()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 flex items-center space-x-2">
                                    <span>üì¶</span>
                                    <span>Orders</span>
                                </button>
                                <button onclick="showWishlist()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 flex items-center space-x-2">
                                    <span>‚ù§Ô∏è</span>
                                    <span>Wishlist</span>
                                </button>
                                <button onclick="showRewards()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 flex items-center space-x-2">
                                    <span>‚≠ê</span>
                                    <span>Rewards</span>
                                </button>
                                <button onclick="showGiftCard()" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-50 flex items-center space-x-2">
                                    <span>üéÅ</span>
                                    <span>Gift Card</span>
                                </button>
                                <hr class="my-2">
                                <button onclick="logout()" class="w-full text-left px-4 py-2 text-red-600 hover:bg-red-50 flex items-center space-x-2">
                                    <span>üö™</span>
                                    <span>Logout</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button onclick="toggleCart()" class="relative bg-gradient-to-r from-green-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all">
                        Cart (<span id="cartCount">0</span>)
                    </button>
                `;
                updateCartUI();
                updateWishlistIcon();
            }
        }

        // Profile Functions
        function showProfile() {
            showNotification('Opening profile settings...', 'info');
        }

        function showOrders() {
            showNotification('Loading your orders...', 'info');
        }

        function showWishlist() {
            const userWishlist = wishlist.filter(item => item.userId === currentUser.id);
            if (userWishlist.length === 0) {
                showNotification('Your wishlist is empty', 'info');
            } else {
                showNotification(`You have ${userWishlist.length} items in wishlist`, 'info');
            }
        }

        function showRewards() {
            showNotification('You have 250 reward points!', 'success');
        }

        function showGiftCard() {
            showNotification('Gift card balance: ‚Çπ0', 'info');
        }

        function updateWishlistIcon() {
            if (currentUser) {
                const productId = 1;
                const isInWishlist = wishlist.some(item => item.id === productId && item.userId === currentUser.id);
                document.getElementById('wishlistIcon').textContent = isInWishlist ? '‚ù§Ô∏è' : 'ü§ç';
            }
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('snackesterCurrentUser');
            showNotification('Logged out successfully!', 'success');
            location.reload();
        }

        // Enhanced Cart functionality with dynamic pricing
        function addToCart() {
            const finalPrice = appliedCoupon ? currentPrice : basePrice;
            const product = {
                id: 1,
                name: "Tangy Tomato Makhana",
                price: finalPrice,
                originalPrice: basePrice,
                weight: "80g",
                quantity: currentQuantity,
                appliedCoupon: appliedCoupon ? appliedCoupon.code : null,
                discount: appliedCoupon ? (basePrice - finalPrice) : 0
            };

            const existingItem = cart.find(item => item.id === product.id && item.appliedCoupon === product.appliedCoupon);
            if (existingItem) {
                existingItem.quantity += currentQuantity;
            } else {
                cart.push(product);
            }

            updateCartUI();
            
            const totalSavings = appliedCoupon ? (basePrice - finalPrice) * currentQuantity : 0;
            const message = totalSavings > 0 ? 
                `Added to cart! You saved ‚Çπ${totalSavings}` : 
                'Added to cart successfully!';
            
            showNotification(message, 'success');
        }

        function buyNow() {
            if (!currentUser) {
                showNotification('Please login to make a purchase', 'error');
                openModal('loginModal');
                return;
            }
            
            addToCart();
            setTimeout(() => {
                toggleCart();
                showNotification('Redirecting to checkout...', 'info');
            }, 500);
        }

        function oneClickBuy() {
            if (!currentUser) {
                showNotification('Please login to use 1-Click Buy', 'error');
                openModal('loginModal');
                return;
            }
            
            const finalPrice = appliedCoupon ? currentPrice : basePrice;
            const totalAmount = finalPrice * currentQuantity;
            const savings = appliedCoupon ? (basePrice - finalPrice) * currentQuantity : 0;
            
            const message = savings > 0 ? 
                `Processing 1-Click payment of ‚Çπ${totalAmount} (Saved ‚Çπ${savings})...` :
                `Processing 1-Click payment of ‚Çπ${totalAmount}...`;
                
            showNotification(message, 'success');
        }

        function updateCartUI() {
            const cartCount = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');

            if (!cartCount) return; // Guard clause for when UI is being updated

            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            cartCount.textContent = totalItems;
            cartTotal.textContent = `‚Çπ${totalPrice}`;

            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-500 text-center">Your cart is empty</p>';
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="border-b pb-4 mb-4">
                        <div class="flex justify-between items-start mb-2">
                            <div class="flex-1">
                                <h4 class="font-semibold">${item.name}</h4>
                                <p class="text-sm text-gray-600">${item.weight}</p>
                                ${item.appliedCoupon ? `<p class="text-xs text-green-600">Coupon: ${item.appliedCoupon}</p>` : ''}
                            </div>
                            <button onclick="removeFromCart(${item.id}, '${item.appliedCoupon || ''}')" class="text-red-500 ml-2">üóëÔ∏è</button>
                        </div>
                        <div class="flex justify-between items-center">
                            <div class="flex items-center space-x-2">
                                <button onclick="updateCartQuantity(${item.id}, '${item.appliedCoupon || ''}', -1)" class="bg-gray-200 px-2 py-1 rounded text-sm">-</button>
                                <span class="text-sm">${item.quantity}</span>
                                <button onclick="updateCartQuantity(${item.id}, '${item.appliedCoupon || ''}', 1)" class="bg-gray-200 px-2 py-1 rounded text-sm">+</button>
                            </div>
                            <div class="text-right">
                                ${item.discount > 0 ? `<div class="text-xs line-through text-gray-500">‚Çπ${item.originalPrice * item.quantity}</div>` : ''}
                                <div class="font-semibold">‚Çπ${item.price * item.quantity}</div>
                                ${item.discount > 0 ? `<div class="text-xs text-green-600">Saved ‚Çπ${item.discount * item.quantity}</div>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        function updateCartQuantity(id, couponCode, change) {
            const item = cart.find(item => item.id === id && (item.appliedCoupon || '') === couponCode);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(id, couponCode);
                } else {
                    updateCartUI();
                }
            }
        }

        function removeFromCart(id, couponCode) {
            cart = cart.filter(item => !(item.id === id && (item.appliedCoupon || '') === couponCode));
            updateCartUI();
            showNotification('Item removed from cart', 'info');
        }

        function toggleCart() {
            const sidebar = document.getElementById('cartSidebar');
            sidebar.classList.toggle('translate-x-full');
        }

        function checkout() {
            if (!currentUser) {
                showNotification('Please login to checkout', 'error');
                openModal('loginModal');
                return;
            }
            if (cart.length === 0) {
                showNotification('Your cart is empty', 'error');
                return;
            }
            
            const totalSavings = cart.reduce((sum, item) => sum + (item.discount * item.quantity), 0);
            const message = totalSavings > 0 ? 
                `Processing checkout... Total savings: ‚Çπ${totalSavings}` :
                'Processing checkout...';
                
            showNotification(message, 'success');
        }

        // Tab System
        function switchTab(tabName) {
            // Hide all tab panels
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active', 'bg-white', 'shadow-md', 'text-blue-600');
                button.classList.add('text-gray-600', 'hover:bg-white', 'hover:shadow-md');
            });
            
            // Show selected tab panel
            document.getElementById(tabName + 'Tab').classList.remove('hidden');
            
            // Add active class to selected tab button
            event.target.classList.add('active', 'bg-white', 'shadow-md', 'text-blue-600');
            event.target.classList.remove('text-gray-600', 'hover:bg-white', 'hover:shadow-md');
            
            // Populate reviews in tab if reviews tab is selected
            if (tabName === 'reviews') {
                populateTabReviews();
            }
        }

        function populateTabReviews() {
            const tabReviewsList = document.getElementById('tabReviewsList');
            tabReviewsList.innerHTML = reviews.slice(0, 3).map(review => `
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border border-blue-200">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <h4 class="font-semibold text-gray-800">${review.name}</h4>
                            ${review.verified ? '<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium">‚úì Verified</span>' : ''}
                        </div>
                        <span class="text-sm text-gray-500">${formatDate(review.date)}</span>
                    </div>
                    <div class="flex items-center mb-2">
                        <span class="star-rating text-lg">${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</span>
                        <span class="ml-2 text-sm text-gray-600">(${review.rating}/5)</span>
                    </div>
                    <p class="text-gray-700 text-sm">${review.text}</p>
                </div>
            `).join('');
        }

        // Size Selection
        function selectSize(weight, price) {
            // Update active size option
            document.querySelectorAll('.size-option').forEach(option => {
                option.classList.remove('active', 'border-blue-300', 'bg-gradient-to-br', 'from-blue-50', 'to-purple-50');
                option.classList.add('bg-gradient-to-br', 'from-gray-100', 'to-gray-200', 'border-gray-300');
            });
            
            event.target.classList.add('active', 'border-blue-300', 'bg-gradient-to-br', 'from-blue-50', 'to-purple-50');
            event.target.classList.remove('from-gray-100', 'to-gray-200', 'border-gray-300');
            
            // Update prices
            basePrice = price;
            currentPrice = appliedCoupon ? calculateDiscountedPrice(price, appliedCoupon) : price;
            updatePriceDisplay();
            
            showNotification(`Size updated to ${weight}g`, 'info');
        }

        function calculateDiscountedPrice(price, coupon) {
            if (coupon.type === 'percentage') {
                return Math.round(price - (price * coupon.value) / 100);
            } else {
                return Math.max(0, price - coupon.value);
            }
        }

        // Product Navigation
        function viewProduct(productType) {
            showNotification(`Redirecting to ${productType} makhana...`, 'info');
        }

        // Enhanced Coupon System
        function applyCoupon() {
            const couponCode = document.getElementById('couponInput').value.toUpperCase();
            applyCouponCode(couponCode);
        }

        function applyCouponCode(code) {
            document.getElementById('couponInput').value = code;
            
            const coupons = {
                'SNACKY10': { type: 'percentage', value: 10, description: '10% off', code: 'SNACKY10' }
            };

            const coupon = coupons[code];
            const resultDiv = document.getElementById('couponResult');
            const finalPriceSection = document.getElementById('finalPriceSection');
            const finalPriceDiv = document.getElementById('finalPrice');
            const totalSavingsDiv = document.getElementById('totalSavings');

            if (coupon) {
                appliedCoupon = coupon;
                let discount = 0;
                let newPrice = basePrice;

                if (coupon.type === 'percentage') {
                    discount = (basePrice * coupon.value) / 100;
                    newPrice = basePrice - discount;
                } else {
                    discount = coupon.value;
                    newPrice = Math.max(0, basePrice - discount);
                }

                currentPrice = Math.round(newPrice);
                
                // Update UI with animation
                const displayPrice = document.getElementById('displayPrice');
                displayPrice.classList.add('price-update');
                setTimeout(() => displayPrice.classList.remove('price-update'), 500);
                
                updatePriceDisplay();
                
                // Show savings
                document.getElementById('savingsDisplay').classList.remove('hidden');
                document.getElementById('originalPriceDisplay').classList.remove('hidden');
                document.getElementById('originalPrice').textContent = basePrice;

                resultDiv.innerHTML = `<span class="text-green-600 font-medium">‚úÖ Coupon applied: ${coupon.description}</span>`;
                finalPriceSection.classList.remove('hidden');
                finalPriceDiv.textContent = `‚Çπ${Math.round(newPrice * currentQuantity)}`;
                totalSavingsDiv.textContent = `Total savings: ‚Çπ${Math.round(100 + (discount * currentQuantity))}`;
                
                showNotification(`Coupon applied! You save ‚Çπ${Math.round(discount * currentQuantity)}`, 'success');
            } else {
                appliedCoupon = null;
                currentPrice = basePrice;
                updatePriceDisplay();
                
                document.getElementById('savingsDisplay').classList.add('hidden');
                document.getElementById('originalPriceDisplay').classList.add('hidden');
                
                resultDiv.innerHTML = `<span class="text-red-600 font-medium">‚ùå Invalid coupon code</span>`;
                finalPriceSection.classList.add('hidden');
                showNotification('Invalid coupon code', 'error');
            }
        }

        // Review functions
        function setRating(rating) {
            currentRating = rating;
            const stars = document.querySelectorAll('#starRating button');
            stars.forEach((star, index) => {
                star.style.color = index < rating ? '#fbbf24' : '#d1d5db';
            });
        }

        function handleReview(event) {
            event.preventDefault();
            
            if (!currentUser) {
                showNotification('Please login to write a review', 'error');
                closeModal('reviewModal');
                openModal('loginModal');
                return;
            }

            const name = document.getElementById('reviewName').value;
            const text = document.getElementById('reviewText').value;

            if (currentRating === 0) {
                showNotification('Please select a rating', 'error');
                return;
            }

            const existingReview = reviews.find(review => 
                review.userId === currentUser.id || 
                (review.name === currentUser.name && review.name === name)
            );

            if (existingReview) {
                showNotification('You have already reviewed this product', 'error');
                return;
            }

            const newReview = {
                id: Date.now(),
                userId: currentUser.id,
                name: name || currentUser.name,
                rating: currentRating,
                text,
                date: new Date().toISOString().split('T')[0],
                verified: true
            };

            reviews.unshift(newReview);
            localStorage.setItem('snackesterReviews', JSON.stringify(reviews));
            
            displayReviews();
            closeModal('reviewModal');
            showNotification('Review submitted successfully!', 'success');
            
            // Clear form
            document.getElementById('reviewName').value = '';
            document.getElementById('reviewText').value = '';
            currentRating = 0;
            setRating(0);
        }

        function displayReviews() {
            const reviewsList = document.getElementById('reviewsList');
            reviewsList.innerHTML = reviews.map(review => `
                <div class="border-b pb-6 last:border-b-0">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center space-x-2">
                            <h4 class="font-semibold text-gray-800">${review.name}</h4>
                            ${review.verified ? '<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium">‚úì Verified Purchase</span>' : ''}
                        </div>
                        <span class="text-sm text-gray-500">${formatDate(review.date)}</span>
                    </div>
                    <div class="flex items-center mb-3">
                        <span class="star-rating text-lg">${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}</span>
                        <span class="ml-2 text-sm text-gray-600 font-medium">(${review.rating}/5)</span>
                    </div>
                    <p class="text-gray-700 leading-relaxed">${review.text}</p>
                    <div class="mt-3 flex items-center space-x-4 text-sm text-gray-500">
                        <button onclick="likeReview(${review.id})" class="flex items-center space-x-1 hover:text-blue-600 transition-colors">
                            <span>üëç</span>
                            <span>Helpful</span>
                        </button>
                        <button onclick="reportReview(${review.id})" class="flex items-center space-x-1 hover:text-red-600 transition-colors">
                            <span>üö©</span>
                            <span>Report</span>
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return 'Yesterday';
            if (diffDays <= 7) return `${diffDays} days ago`;
            if (diffDays <= 30) return `${Math.ceil(diffDays / 7)} weeks ago`;
            return date.toLocaleDateString();
        }

        function likeReview(reviewId) {
            showNotification('Thank you for your feedback!', 'info');
        }

        function reportReview(reviewId) {
            showNotification('Review reported. Thank you for helping us maintain quality.', 'info');
        }

        // Share functions
        function shareProduct(platform) {
            const url = window.location.href;
            const text = "Check out this amazing Tangy Tomato Makhana from Snackester!";
            
            let shareUrl;
            switch(platform) {
                case 'instagram':
                    // Instagram doesn't support direct URL sharing, so we copy the link and show instructions
                    navigator.clipboard.writeText(url).then(() => {
                        showNotification('Link copied! Open Instagram and paste in your story or post', 'success');
                    });
                    return;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
                    break;
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'noopener,noreferrer');
                showNotification(`Sharing on ${platform.charAt(0).toUpperCase() + platform.slice(1)}...`, 'info');
            }
        }

        function copyLink() {
            navigator.clipboard.writeText(window.location.href).then(() => {
                showNotification('Link copied to clipboard!', 'success');
            });
        }

        // Notification function
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notificationText');
            
            notificationText.textContent = message;
            
            notification.className = 'notification';
            switch(type) {
                case 'success':
                    notification.classList.add('bg-green-500');
                    break;
                case 'error':
                    notification.classList.add('bg-red-500');
                    break;
                case 'info':
                    notification.classList.add('bg-blue-500');
                    break;
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            displayReviews();
            updateCartUI();
            updatePriceDisplay();
            
            // Check for remembered login
            const rememberedUser = localStorage.getItem('snackesterCurrentUser');
            const sessionUser = sessionStorage.getItem('snackesterCurrentUser');
            
            if (rememberedUser && localStorage.getItem('snackesterRememberMe')) {
                currentUser = JSON.parse(rememberedUser);
                updateUIForLoggedInUser();
            } else if (sessionUser) {
                currentUser = JSON.parse(sessionUser);
                updateUIForLoggedInUser();
            }
            
            // Add event listeners
            const agreeTerms = document.getElementById('agreeTerms');
            if (agreeTerms) {
                agreeTerms.addEventListener('change', updateSignupButton);
            }
            
            // Close search results when clicking outside
            document.addEventListener('click', function(event) {
                const searchInput = document.getElementById('searchInput');
                const searchResults = document.getElementById('searchResults');
                
                if (!searchInput.contains(event.target) && !searchResults.contains(event.target)) {
                    searchResults.classList.add('hidden');
                }
            });
        });

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98b8a88983088993',t:'MTc1OTk1ODE3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
